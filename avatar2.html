<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habit Harmony - Avatar Creator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, #cfe0fc, #e2d4f9);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    h1, h2, h3 {
      color: #6b21a8;
      text-align: center;
    }
    
    .avatar-card {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.15);
      padding: 24px;
      margin: 20px auto;
    }
    
    .avatar-preview {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: #fff;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
      border: 4px solid #7c3aed;
    }
    
    .avatar-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }
    
    .tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }
    
    .tab {
      background: #f0f0f0;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      border: none;
      font-size: 16px;
    }
    
    .tab.active {
      background: #7c3aed;
      color: white;
    }
    
    .tab-content {
      display: none;
      padding: 20px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 15px;
      margin-top: 10px;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .option-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 15px 0;
    }
    
    .option {
      background: white;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      text-align: center;
      border: 2px solid transparent;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .option:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .option.selected {
      border-color: #7c3aed;
      box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
    }
    
    .option-image {
      width: 80px;
      height: 80px;
      margin: 0 auto;
      display: block;
      background-position: center;
      background-repeat: no-repeat;
      background-size: contain;
      border-radius: 10px;
    }
    
    .color-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      justify-content: center;
    }
    
    .color {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid transparent;
      transition: transform 0.2s;
    }
    
    .color:hover {
      transform: scale(1.1);
    }
    
    .color.selected {
      border-color: black;
    }
    
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
    }
    
    button {
      background: #7c3aed;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    button:hover {
      background: #6b21a8;
    }
    
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #28a745;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .toast.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŒ± Habit Harmony Avatar Creator</h1>
    
    <div class="avatar-card">
      <h2>Your Avatar</h2>
      <div class="avatar-preview">
        <div id="base-layer" class="avatar-layer"></div>
        <div id="hair-layer" class="avatar-layer"></div>
        <div id="eyes-layer" class="avatar-layer"></div>
        <div id="mouth-layer" class="avatar-layer"></div>
        <div id="accessory-layer" class="avatar-layer"></div>
      </div>
      
      <div class="action-buttons">
        <button id="random-btn">Random Avatar</button>
        <button id="save-btn">Save Avatar</button>
      </div>
    </div>
    
    <div class="avatar-card">
      <h2>Customize Your Avatar</h2>
      
      <div class="tabs">
        <button class="tab active" data-tab="face">Face</button>
        <button class="tab" data-tab="hair">Hair</button>
        <button class="tab" data-tab="features">Features</button>
        <button class="tab" data-tab="accessories">Accessories</button>
      </div>
      
      <!-- Face Tab -->
      <div id="face-tab" class="tab-content active">
        <h3>Face Shape</h3>
        <div class="option-grid">
          <div class="option selected" data-type="face" data-value="round">
            <div class="option-image" style="background-image: url('https://i.imgur.com/SQpoPYH.png');"></div>
            <p>Round</p>
          </div>
          <div class="option" data-type="face" data-value="square">
            <div class="option-image" style="background-image: url('https://i.imgur.com/SWSJ9gx.png');"></div>
            <p>Square</p>
          </div>
          <div class="option" data-type="face" data-value="heart">
            <div class="option-image" style="background-image: url('https://i.imgur.com/xQtACeE.png');"></div>
            <p>Heart</p>
          </div>
        </div>
        
        <h3>Skin Color</h3>
        <div class="color-options">
          <div class="color selected" style="background-color: #FDE3D5;" data-type="skin" data-value="#FDE3D5"></div>
          <div class="color" style="background-color: #F1C27D;" data-type="skin" data-value="#F1C27D"></div>
          <div class="color" style="background-color: #E0AC69;" data-type="skin" data-value="#E0AC69"></div>
          <div class="color" style="background-color: #C68642;" data-type="skin" data-value="#C68642"></div>
          <div class="color" style="background-color: #8D5524;" data-type="skin" data-value="#8D5524"></div>
          <div class="color" style="background-color: #5C3518;" data-type="skin" data-value="#5C3518"></div>
        </div>
      </div>
      
      <!-- Hair Tab -->
      <div id="hair-tab" class="tab-content">
        <h3>Hair Style</h3>
        <div class="option-grid">
          <div class="option selected" data-type="hair" data-value="short">
            <div class="option-image" style="background-image: url('https://i.imgur.com/pZdUxWt.png');"></div>
            <p>Short</p>
          </div>
          <div class="option" data-type="hair" data-value="medium">
            <div class="option-image" style="background-image: url('https://i.imgur.com/jGkpbVB.png');"></div>
            <p>Medium</p>
          </div>
          <div class="option" data-type="hair" data-value="long">
            <div class="option-image" style="background-image: url('https://i.imgur.com/CRP7KYE.png');"></div>
            <p>Long</p>
          </div>
          <div class="option" data-type="hair" data-value="curly">
            <div class="option-image" style="background-image: url('https://i.imgur.com/S37kQDO.png');"></div>
            <p>Curly</p>
          </div>
          <div class="option" data-type="hair" data-value="bun">
            <div class="option-image" style="background-image: url('https://i.imgur.com/CT1ZHZp.png');"></div>
            <p>Bun</p>
          </div>
          <div class="option" data-type="hair" data-value="none">
            <div class="option-image" style="background-image: url('https://i.imgur.com/KcbDPh2.png');"></div>
            <p>None</p>
          </div>
        </div>
        
        <h3>Hair Color</h3>
        <div class="color-options">
          <div class="color selected" style="background-color: #090806;" data-type="hairColor" data-value="#090806"></div>
          <div class="color" style="background-color: #8D4A43;" data-type="hairColor" data-value="#8D4A43"></div>
          <div class="color" style="background-color: #B55239;" data-type="hairColor" data-value="#B55239"></div>
          <div class="color" style="background-color: #D6C4C2;" data-type="hairColor" data-value="#D6C4C2"></div>
          <div class="color" style="background-color: #F7F6F2;" data-type="hairColor" data-value="#F7F6F2"></div>
          <div class="color" style="background-color: #F4D35E;" data-type="hairColor" data-value="#F4D35E"></div>
        </div>
      </div>
      
      <!-- Features Tab -->
      <div id="features-tab" class="tab-content">
        <h3>Eyes</h3>
        <div class="option-grid">
          <div class="option selected" data-type="eyes" data-value="default">
            <div class="option-image" style="background-image: url('https://i.imgur.com/JYJgFYz.png');"></div>
            <p>Default</p>
          </div>
          <div class="option" data-type="eyes" data-value="happy">
            <div class="option-image" style="background-image: url('https://i.imgur.com/DURGSWd.png');"></div>
            <p>Happy</p>
          </div>
          <div class="option" data-type="eyes" data-value="wink">
            <div class="option-image" style="background-image: url('https://i.imgur.com/LAcvCsF.png');"></div>
            <p>Wink</p>
          </div>
        </div>
        
        <h3>Mouth</h3>
        <div class="option-grid">
          <div class="option selected" data-type="mouth" data-value="smile">
            <div class="option-image" style="background-image: url('https://i.imgur.com/YOOCLmR.png');"></div>
            <p>Smile</p>
          </div>
          <div class="option" data-type="mouth" data-value="laugh">
            <div class="option-image" style="background-image: url('https://i.imgur.com/8fKRhGt.png');"></div>
            <p>Laugh</p>
          </div>
          <div class="option" data-type="mouth" data-value="neutral">
            <div class="option-image" style="background-image: url('https://i.imgur.com/dqvB8wZ.png');"></div>
            <p>Neutral</p>
          </div>
        </div>
      </div>
      
      <!-- Accessories Tab -->
      <div id="accessories-tab" class="tab-content">
        <h3>Head Accessories</h3>
        <div class="option-grid">
          <div class="option selected" data-type="accessory" data-value="none">
            <div class="option-image" style="background-image: url('https://i.imgur.com/KcbDPh2.png');"></div>
            <p>None</p>
          </div>
          <div class="option" data-type="accessory" data-value="glasses">
            <div class="option-image" style="background-image: url('https://i.imgur.com/Hgr1Pxj.png');"></div>
            <p>Glasses</p>
          </div>
          <div class="option" data-type="accessory" data-value="hat">
            <div class="option-image" style="background-image: url('https://i.imgur.com/dQ62MHl.png');"></div>
            <p>Hat</p>
          </div>
          <div class="option" data-type="accessory" data-value="flower">
            <div class="option-image" style="background-image: url('https://i.imgur.com/OUTStsV.png');"></div>
            <p>Flower</p>
          </div>
          <div class="option" data-type="accessory" data-value="headphones">
            <div class="option-image" style="background-image: url('https://i.imgur.com/sMt3BEZ.png');"></div>
            <p>Headphones</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="toast" class="toast"></div>
  
  <script>
    // Avatar state
    const avatar = {
      face: "round",
      skin: "#FDE3D5",
      hair: "short",
      hairColor: "#090806",
      eyes: "default",
      mouth: "smile",
      accessory: "none"
    };
    
    // Avatar images mapping - actual images
    const avatarImages = {
      face: {
        round: "https://i.imgur.com/SQpoPYH.png",
        square: "https://i.imgur.com/SWSJ9gx.png",
        heart: "https://i.imgur.com/xQtACeE.png"
      },
      hair: {
        short: "https://i.imgur.com/pZdUxWt.png",
        medium: "https://i.imgur.com/jGkpbVB.png",
        long: "https://i.imgur.com/CRP7KYE.png",
        curly: "https://i.imgur.com/S37kQDO.png",
        bun: "https://i.imgur.com/CT1ZHZp.png",
        none: "https://i.imgur.com/KcbDPh2.png"
      },
      eyes: {
        default: "https://i.imgur.com/JYJgFYz.png",
        happy: "https://i.imgur.com/DURGSWd.png",
        wink: "https://i.imgur.com/LAcvCsF.png"
      },
      mouth: {
        smile: "https://i.imgur.com/YOOCLmR.png",
        laugh: "https://i.imgur.com/8fKRhGt.png",
        neutral: "https://i.imgur.com/dqvB8wZ.png"
      },
      accessory: {
        none: "",
        glasses: "https://i.imgur.com/Hgr1Pxj.png",
        hat: "https://i.imgur.com/dQ62MHl.png",
        flower: "https://i.imgur.com/OUTStsV.png",
        headphones: "https://i.imgur.com/sMt3BEZ.png"
      }
    };
    
    // Initialize the avatar preview
    updateAvatarPreview();
    
    // Try to load saved avatar
    loadSavedAvatar();
    
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs and tab content
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked tab
        tab.classList.add('active');
        
        // Show corresponding tab content
        const tabId = tab.getAttribute('data-tab') + '-tab';
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // Option selection
    document.querySelectorAll('.option').forEach(option => {
      option.addEventListener('click', () => {
        const type = option.getAttribute('data-type');
        const value = option.getAttribute('data-value');
        
        // Remove selected class from all options of the same type
        document.querySelectorAll(`.option[data-type="${type}"]`).forEach(opt => {
          opt.classList.remove('selected');
        });
        
        // Add selected class to clicked option
        option.classList.add('selected');
        
        // Update avatar state
        avatar[type] = value;
        
        // Update avatar preview
        updateAvatarPreview();
      });
    });
    
    // Color selection
    document.querySelectorAll('.color').forEach(color => {
      color.addEventListener('click', () => {
        const type = color.getAttribute('data-type');
        const value = color.getAttribute('data-value');
        
        // Remove selected class from all colors of the same type
        document.querySelectorAll(`.color[data-type="${type}"]`).forEach(c => {
          c.classList.remove('selected');
        });
        
        // Add selected class to clicked color
        color.classList.add('selected');
        
        // Update avatar state
        avatar[type] = value;
        
        // Update avatar preview
        updateAvatarPreview();
      });
    });
    
    // Random avatar button
    document.getElementById('random-btn').addEventListener('click', () => {
      // Get random selections for each feature
      avatar.face = getRandomKey(avatarImages.face);
      avatar.skin = getRandomSkinColor();
      avatar.hair = getRandomKey(avatarImages.hair);
      avatar.hairColor = getRandomHairColor();
      avatar.eyes = getRandomKey(avatarImages.eyes);
      avatar.mouth = getRandomKey(avatarImages.mouth);
      avatar.accessory = getRandomKey(avatarImages.accessory);
      
      // Update UI to match random selections
      updateUIFromState();
      
      // Update avatar preview
      updateAvatarPreview();
      
      // Show success message
      showToast('Random avatar created!');
    });
    
    // Save avatar button
    document.getElementById('save-btn').addEventListener('click', () => {
      // Save avatar state to localStorage
      localStorage.setItem('savedAvatar', JSON.stringify(avatar));
      showToast('Avatar saved successfully!');
    });
    
    // Load saved avatar if available
    function loadSavedAvatar() {
      const savedAvatar = localStorage.getItem('savedAvatar');
      if (savedAvatar) {
        try {
          const parsedAvatar = JSON.parse(savedAvatar);
          Object.assign(avatar, parsedAvatar);
          updateUIFromState();
          updateAvatarPreview();
        } catch (e) {
          console.error("Error loading saved avatar:", e);
        }
      }
    }
    
    // Update avatar preview based on current state
    function updateAvatarPreview() {
      // Set base (face) with skin tint
      const baseLayer = document.getElementById('base-layer');
      baseLayer.style.backgroundImage = `url('${avatarImages.face[avatar.face]}')`;
      baseLayer.style.backgroundColor = avatar.skin;
      
      // Set hair layer
      const hairLayer = document.getElementById('hair-layer');
      if (avatar.hair === 'none') {
        hairLayer.style.backgroundImage = 'none';
      } else {
        hairLayer.style.backgroundImage = `url('${avatarImages.hair[avatar.hair]}')`;
        applyHairColor(hairLayer, avatar.hairColor);
      }
      
      // Set eyes layer
      const eyesLayer = document.getElementById('eyes-layer');
      eyesLayer.style.backgroundImage = `url('${avatarImages.eyes[avatar.eyes]}')`;
      
      // Set mouth layer
      const mouthLayer = document.getElementById('mouth-layer');
      mouthLayer.style.backgroundImage = `url('${avatarImages.mouth[avatar.mouth]}')`;
      
      // Set accessory layer
      const accessoryLayer = document.getElementById('accessory-layer');
      if (avatar.accessory === 'none') {
        accessoryLayer.style.backgroundImage = 'none';
      } else {
        accessoryLayer.style.backgroundImage = `url('${avatarImages.accessory[avatar.accessory]}')`;
      }
    }
    
    // Apply hair color effect 
    function applyHairColor(element, color) {
      // Use a combination of CSS filters to simulate hair color
      switch(color) {
        case "#090806": // Black
          element.style.filter = "brightness(0.4)";
          break;
        case "#8D4A43": // Brown
          element.style.filter = "sepia(0.8) hue-rotate(0deg) saturate(1.5) brightness(0.7)";
          break;
        case "#B55239": // Auburn/Red
          element.style.filter = "sepia(0.6) hue-rotate(350deg) saturate(2) brightness(0.8)";
          break;
        case "#D6C4C2": // Gray
          element.style.filter = "grayscale(1) brightness(0.85)";
          break;
        case "#F7F6F2": // White/Very light blonde
          element.style.filter = "brightness(1.8) contrast(0.8) grayscale(0.5)";
          break;
        case "#F4D35E": // Blonde
          element.style.filter = "sepia(0.4) hue-rotate(30deg) saturate(2) brightness(1.2)";
          break;
        default:
          element.style.filter = "none";
      }
    }
    
    // Update the UI selections to match current avatar state
    function updateUIFromState() {
      // Update face selection
      document.querySelectorAll(`.option[data-type="face"]`).forEach(option => {
        option.classList.toggle('selected', option.getAttribute('data-value') === avatar.face);
      });
      
      // Update skin color selection
      document.querySelectorAll(`.color[data-type="skin"]`).forEach(color => {
        color.classList.toggle('selected', color.getAttribute('data-value') === avatar.skin);
      });
      
      // Update hair selection
      document.querySelectorAll(`.option[data-type="hair"]`).forEach(option => {
        option.classList.toggle('selected', option.getAttribute('data-value') === avatar.hair);
      });
      
      // Update hair color selection
      document.querySelectorAll(`.color[data-type="hairColor"]`).forEach(color => {
        color.classList.toggle('selected', color.getAttribute('data-value') === avatar.hairColor);
      });
      
      // Update eyes selection
      document.querySelectorAll(`.option[data-type="eyes"]`).forEach(option => {
        option.classList.toggle('selected', option.getAttribute('data-value') === avatar.eyes);
      });
      
      // Update mouth selection
      document.querySelectorAll(`.option[data-type="mouth"]`).forEach(option => {
        option.classList.toggle('selected', option.getAttribute('data-value') === avatar.mouth);
      });
      
      // Update accessory selection
      document.querySelectorAll(`.option[data-type="accessory"]`).forEach(option => {
        option.classList.toggle('selected', option.getAttribute('data-value') === avatar.accessory);
      });
    }
    
    // Helper function to get a random key from an object
    function getRandomKey(obj) {
      const keys = Object.keys(obj);
      return keys[Math.floor(Math.random() * keys.length)];
    }
    
    // Helper function to get a random skin color
    function getRandomSkinColor() {
      const skinColors = [
        "#FDE3D5", "#F1C27D", "#E0AC69", "#C68642", "#8D5524", "#5C3518"
      ];
      return skinColors[Math.floor(Math.random() * skinColors.length)];
    }
    
    // Helper function to get a random hair color
    function getRandomHairColor() {
      const hairColors = [
        "#090806", "#8D4A43", "#B55239", "#D6C4C2", "#F7F6F2", "#F4D35E"
      ];
      return hairColors[Math.floor(Math.random() * hairColors.length)];
    }
    
    // Show toast message
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
  </script>
</body>
</html>
